<!DOCTYPE html>
<html>

<head>
<title>用python，查快递</title>
    <meta charset="utf-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <meta name="description" content="A blog of a programmer.">
    <meta name="keywords" content="code,game,digital products,daily life">
    <link rel="stylesheet" type="text/css" href="/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="/theme/css/highlight.css">
    <link rel="icon" href="/theme/images/terminal.ico">

</head>

<body>
    <nav class="nav">
        <div class="nav-container">
            <div class="brand">
                <a href="https://weilet.me">Weilet's Blog</a>
            </div>
            <div class="links">
                <a class="main-nav-link" href="/archives">归档</a>
                <a class="main-nav-link" href="/categories">分类</a>
                <a class="main-nav-link" href="/tags">标签</a>
                <a class="main-nav-link" href="/index.xml">RSS</a>
            </div>
        </div>
    </nav>
<main id="main-content">
    <article class="single container">
        <header class="single-header">
            <div class="flex">
                <h1>用python，查快递</h1>
                <div class="post-meta">
                    <time class="date">Aug 07, 2018</time>
                    /
                    <span>
                        <a href="/category/python.html" class="comment-link">
                            python
                        </a>
                    </span>
                </div>
            </div>
        </header>
        <div class="post">
            <p>在剁手的同时练手&nbsp;）</p>
<p><span class="dquo">&#8220;</span>` {.EnlighterJSRAW&nbsp;enlighter-language=&#8221;python&#8221;}</p>
<h1 id="-coding-utf-8-">-<em>- coding: utf-8 -</em>-<a class="headerlink" href="#-coding-utf-8-" title="Permanent link"> </a></h1>
<h1 id="author-lily_sun">@Author: Lily_Sun<a class="headerlink" href="#author-lily_sun" title="Permanent link"> </a></h1>
<h1 id="date-2018-08-07-013150">@Date:   2018-08-07 01:31:50<a class="headerlink" href="#date-2018-08-07-013150" title="Permanent link"> </a></h1>
<h1 id="last-modified-by-lily_sun">@Last Modified by:   Lily_Sun<a class="headerlink" href="#last-modified-by-lily_sun" title="Permanent link"> </a></h1>
<h1 id="last-modified-time-2018-08-07-061713">@Last Modified time: 2018-08-07 06:17:13<a class="headerlink" href="#last-modified-time-2018-08-07-061713" title="Permanent link"> </a></h1>
<p>import json
import requests
import&nbsp;re</p>
<h1 id="_1">访问网页返回字典<a class="headerlink" href="#_1" title="Permanent link"> </a></h1>
<p>def visit_api(url):
    res = requests.get(url)
    result_dict = json.loads(res.content.decode(&#8216;utf-8&#8217;))
    return&nbsp;result_dict</p>
<h1 id="_2">返回公司编号<a class="headerlink" href="#_2" title="Permanent link"> </a></h1>
<p>def get_company(epnum):
    url = &#8216;http://m.kuaidi100.com/autonumber/auto?num=&#8217; + str(epnum)
    company = visit_api(url)[0][&#8216;comCode&#8217;]
    return&nbsp;company</p>
<h1 id="_3">查询<a class="headerlink" href="#_3" title="Permanent link"> </a></h1>
<p>def get_express(epnum,company):
    url = &#8216;http://m.kuaidi100.com/query?type=&#8217; + str(company) + &#8216;&amp;postid=&#8217;+ str(epnum) + &#8216;&amp;id=1&amp;valicode=&#8217;
    result_list = visit_api(url)[&#8216;data&#8217;]
    #print(result_list)
    for result in result_list:
    print(result[&#8216;context&#8217;])
    print(&#8220;到达时间：&nbsp;&#8220;+result[&#8216;time&#8217;])</p>
<p>def main():
    epnum = input(&#8216;输入你的快递单号：\n&#8217;)&nbsp;get_express(epnum,get_company(epnum))</p>
<p>if <strong>name</strong> == &#8216;<strong>main</strong>&#8216;:
    main()&nbsp;&#8220;`</p>
        </div>
    </article>
</main>
    <footer class="footer container">
        <a class="main-nav-link" href="/blogroll">友链</a>
        <a class="main-nav-link" href="/about">关于</a>
    </footer>
</body>

</html>