<!DOCTYPE html>
<html>

<head>
<title>Windows Terminal折腾指南</title>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-157817775-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-157817775-1');
</script>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name="description" content="终端是程序员的浪漫 俺从2017年年底开始接触终端这个概念，那时候俺对它一知半解，是个被GUI宠坏的巨婴。 直到后来，俺碰见了Hyper，它的高颜值和高度定制使俺沉迷。然而渐渐地俺觉得它的速度比起原生的慢太多了。而且有些时候俺需要切换PowerShell和WSL，它并不支持。 能够打败原生的，只有原生。某天俺在Django交流群里了解到Windows Terminal（下称Terminal），一番折腾，流畅的同时还能够多个shell切换，值得安利！ 注意：Windows Terminal需要Windows 10 1903或更高版本 预备 俺假设你是使用WSL的： 首先，开启WSL功能（Cortana里搜索功能，一溜儿找下来） 然后，在Microsoft Store找到你喜欢的发行版（比如俺就喜欢Ubuntu）安装 安装 Microsoft Store 最简单的方法，目前使用下来没有任何问题。 自行编译 官方文档请。大哥都选择自行编译了，看看文档肯定会。 Chocolatey choco install microsoft-windows-terminal …"/>
  

<!-- Start of OpenGraph protocol tags -->
<meta property="og:site_name" content="Weilet's alchemy room" />
<meta property="og:type" content="article" />
    
<meta property="og:title" content="Windows&nbsp;Terminal折腾指南" />
<meta property="og:url" content="https://weilet.me/Windows Terminal折腾指南" />
<meta property="og:description" content="终端是程序员的浪漫 俺从2017年年底开始接触终端这个概念，那时候俺对它一知半解，是个被GUI宠坏的巨婴。 直到后来，俺碰见了Hyper，它的高颜值和高度定制使俺沉迷。然而渐渐地俺觉得它的速度比起原生的慢太多了。而且有些时候俺需要切换PowerShell和WSL，它并不支持。 能够打败原生的，只有原生。某天俺在Django交流群里了解到Windows Terminal（下称Terminal），一番折腾，流畅的同时还能够多个shell切换，值得安利！ 注意：Windows Terminal需要Windows 10 1903或更高版本 预备 俺假设你是使用WSL的： 首先，开启WSL功能（Cortana里搜索功能，一溜儿找下来） 然后，在Microsoft Store找到你喜欢的发行版（比如俺就喜欢Ubuntu）安装 安装 Microsoft Store 最简单的方法，目前使用下来没有任何问题。 自行编译 官方文档请。大哥都选择自行编译了，看看文档肯定会。 Chocolatey choco install microsoft-windows-terminal …" />
<meta property="article:published_time" content="2020-02-14 22:25:00+08:00" />
<!-- End of OpenGraph protocol tags -->

<meta name="twitter:card" content="终端是程序员的浪漫 俺从2017年年底开始接触终端这个概念，那时候俺对它一知半解，是个被GUI宠坏的巨婴。 直到后来，俺碰见了Hyper，它的高颜值和高度定制使俺沉迷。然而渐渐地俺觉得它的速度比起原生的慢太多了。而且有些时候俺需要切换PowerShell和WSL，它并不支持。 能够打败原生的，只有原生。某天俺在Django交流群里了解到Windows Terminal（下称Terminal），一番折腾，流畅的同时还能够多个shell切换，值得安利！ 注意：Windows Terminal需要Windows 10 1903或更高版本 预备 俺假设你是使用WSL的： 首先，开启WSL功能（Cortana里搜索功能，一溜儿找下来） 然后，在Microsoft Store找到你喜欢的发行版（比如俺就喜欢Ubuntu）安装 安装 Microsoft Store 最简单的方法，目前使用下来没有任何问题。 自行编译 官方文档请。大哥都选择自行编译了，看看文档肯定会。 Chocolatey choco install microsoft-windows-terminal …" />
<meta name="keywords" content="Python, Rust, C++">
<link rel="stylesheet" type="text/css" href="/theme/css/style.css">
<link rel="stylesheet" type="text/css" href="/theme/css/highlight.css">
<link rel="icon" href="/theme/images/terminal.ico">
<link rel="canonical" href="https://weilet.me/Windows Terminal折腾指南"/>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script></head>

<body>
<nav class="nav">
    <div class="nav-container">
        <div class="brand">
            <a href="https://weilet.me">Weilet's Blog</a>
        </div>
        <div class="links">
            <a class="main-nav-link" href="/archives">归档</a>
            <a class="main-nav-link" href="/categories">分类</a>
            <a class="main-nav-link" href="/tags">标签</a>
            <a class="main-nav-link" href="/rss.xml">
                <img src="/theme/images/rss.svg">
            </a>
        </div>
    </div>
</nav>    
<main id="main-content">
    <article class="single container">
        <header class="single-header">
            <div class="flex">
                <h1>Windows&nbsp;Terminal折腾指南</h1>
                <div class="post-meta">
                    <time class="date">2020-02-14</time>
                    /
                    <span>
                        <a href="/category/Tech.html" class="comment-link">
                            Tech
                        </a>
                            ·
                                <a href="/tag/Windows.html" class="comment-link">
                                Windows
                                </a>
·                                <a href="/tag/Terminal.html" class="comment-link">
                                Terminal
                                </a>
                        
                    </span>
                </div>
            </div>
        </header>
        <div class="post">
            <blockquote>
<p>终端是程序员的浪漫</p>
</blockquote>
<p>俺从2017年年底开始接触终端这个概念，那时候俺对它一知半解，是个被GUI宠坏的巨婴。</p>
<p>直到后来，俺碰见了<a href="https://hyper.is/">Hyper</a>，它的高颜值和高度定制使俺沉迷。然而渐渐地俺觉得它的速度比起原生的慢太多了。而且有些时候俺需要切换PowerShell和WSL，它并不支持。</p>
<p>能够打败原生的，只有原生。某天俺在Django交流群里了解到<a href="https://github.com/microsoft/terminal">Windows Terminal</a>（下称Terminal），一番折腾，流畅的同时还能够多个shell切换，值得安利！</p>
<p><code>注意：Windows Terminal需要Windows 10 1903或更高版本</code></p>
<h3 id="_1">预备<a class="headerlink" href="#_1" title="Permanent link"> </a></h3>
<p>俺假设你是使用WSL的：</p>
<p>首先，开启WSL功能（Cortana里搜索功能，一溜儿找下来）</p>
<p>然后，在Microsoft&nbsp;Store找到你喜欢的发行版（比如俺就喜欢Ubuntu）安装</p>
<h3 id="_2">安装<a class="headerlink" href="#_2" title="Permanent link"> </a></h3>
<h4 id="microsoft-store">Microsoft Store<a class="headerlink" href="#microsoft-store" title="Permanent link"> </a></h4>
<p>最简单的方法，目前使用下来没有任何问题。</p>
<h4 id="_3">自行编译<a class="headerlink" href="#_3" title="Permanent link"> </a></h4>
<p><a href="https://github.com/microsoft/terminal#manually-installing-builds-from-this-repository">官方文档</a>请。大哥都选择自行编译了，看看文档肯定会。</p>
<h4 id="chocolatey">Chocolatey<a class="headerlink" href="#chocolatey" title="Permanent link"> </a></h4>
<p><code>choco install microsoft-windows-terminal</code></p>
<p>(Chocolatey的下载速度超级慢的说)</p>
<h3 id="_4">配置<a class="headerlink" href="#_4" title="Permanent link"> </a></h3>
<p>打开Terminal，找到setting位置。</p>
<p>你可以在<a href="https://github.com/microsoft/terminal/blob/master/doc/cascadia/SettingsSchema.md#globals">这里</a>查看全局设置</p>
<p>你可以在<a href="https://github.com/microsoft/terminal/blob/master/doc/cascadia/SettingsSchema.md#profiles">这里</a>查看单独设置</p>
<p>你可以在<a href="https://github.com/microsoft/terminal/blob/master/doc/cascadia/SettingsSchema.md#implemented-commands-and-actions">这里</a>查看快捷键配置</p>
<p>一番配置后，你的Terminal的雏形就完成了。</p>
<h3 id="wsl">WSL优化<a class="headerlink" href="#wsl" title="Permanent link"> </a></h3>
<h4 id="zsh">安装zsh<a class="headerlink" href="#zsh" title="Permanent link"> </a></h4>
<p><code>sudo apt-get install zsh</code></p>
<h4 id="zshbash">设置zsh为默认bash<a class="headerlink" href="#zshbash" title="Permanent link"> </a></h4>
<p><code>sed -i '1i bash -c zsh' ~/.bashrc</code> </p>
<h4 id="oh-my-zsh">安装oh-my-zsh<a class="headerlink" href="#oh-my-zsh" title="Permanent link"> </a></h4>
<p><code>sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"</code></p>
<h4 id="_5">安装插件<a class="headerlink" href="#_5" title="Permanent link"> </a></h4>
<ul>
<li>
<p><a href="https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md#oh-my-zsh">zsh语法高亮</a> </p>
</li>
<li>
<p><a href="https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md#oh-my-zsh">zsh历史记录</a></p>
</li>
<li>……</li>
</ul>
<p>在zshrc中配置：</p>
<p><strong>注意☠</strong>：插件之间是以空格分隔的</p>
<p><code>plugins=(git sublime zsh-syntax-highlighting zsh-autosuggestions)</code></p>
<h3 id="powershell">PowerShell优化<a class="headerlink" href="#powershell" title="Permanent link"> </a></h3>
<p><strong>注意☠</strong>：以管理员身份单独运行PowerShell</p>
<h4 id="posh-git">安装posh-git<a class="headerlink" href="#posh-git" title="Permanent link"> </a></h4>
<p><code>Install-Module posh-git -Scope CurrentUser</code></p>
<h4 id="oh-my-posh">安装oh-my-posh<a class="headerlink" href="#oh-my-posh" title="Permanent link"> </a></h4>
<p><code>Install-Module oh-my-posh -Scope CurrentUser</code></p>
<h4 id="_6">选择主题<a class="headerlink" href="#_6" title="Permanent link"> </a></h4>
<p><code>notepad $profile</code></p>
<p>在弹出的文本编辑器中输入以下内容</p>
<div class="highlight"><pre><span></span><span class="nb">Import-Module</span> <span class="n">oh-my-posh</span>
<span class="nb">set-Theme</span> <span class="n">robbyrussell</span>
</pre></div>


<p>随后你可以在posh中输入<code>set-Theme lily-is-cool</code> 来获取所有主题的名字并以上述方法修改主题。</p>
<h3 id="_7">字体优化<a class="headerlink" href="#_7" title="Permanent link"> </a></h3>
<h4 id="powerline">安装powerline字体<a class="headerlink" href="#powerline" title="Permanent link"> </a></h4>
<p><code>git clone https://github.com/powerline/fonts.git</code></p>
<p>在克隆的目录中找到<code>install.ps1</code>，双击它即可自动安装字体。</p>
<h4 id="terminal">配置到Terminal<a class="headerlink" href="#terminal" title="Permanent link"> </a></h4>
<p>找到这个字段：“fontFace”，把它们的值都改为：“Meslo <span class="caps">LG</span> M for&nbsp;powerLine”</p>
<h3 id="one-more-thing">One More Thing<a class="headerlink" href="#one-more-thing" title="Permanent link"> </a></h3>
<p>甚是怀念PowerShell的“从此打开PowerShell”的右键菜单，于是为Terminal配置之</p>
<div class="highlight"><pre><span></span>Windows Registry Editor Version 5.00

<span class="k">[</span><span class="nb">HKEY_CLASSES_ROOT</span><span class="k">\Directory\Background\shell\wt]</span>
<span class="na">@</span><span class="o">=</span><span class="s">&quot;{右键菜单文字}&quot;</span>
<span class="na">&quot;Icon&quot;</span><span class="o">=</span><span class="s">&quot;{icon的绝对路径}&quot;</span>


<span class="k">[</span><span class="nb">HKEY_CLASSES_ROOT</span><span class="k">\Directory\Background\shell\wt\command]</span>
<span class="na">@</span><span class="o">=</span><span class="s">&quot;{Terminal的可执行文件的绝对路径，名称为wt.exe} -d .&quot;</span>
</pre></div>


<p>将上面的文本另存为注册表项(后缀为.reg)，点击添加即可</p>
<p>另外，在配置文件中的“startingDirectory”决定了你<strong>新增</strong>Tab的路径，你可以将它的值设置为“.”以保证新增的Tab的路径也是当前工作路径。</p>
        </div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>

<div id="gitalk-container"></div>
<script type="text/javascript">
var gitalk = new Gitalk({
	clientID: '156774f08ace665cde88',
	clientSecret: 'c5493bd3bb6cccff1313f145801c180300471f72',
	repo: 'weilet.github.io',
	owner: 'Weilet',
	admin: ['Weilet'],
	id: md5(location.pathname),
	distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>    </article>
<link href="https://cdn.bootcss.com/tocbot/4.8.1/tocbot.css" rel="stylesheet">
<style type="text/css">
  .toc {
    position:fixed !important;
    font-weight: normal;
    font-size: 1.2rem;
    top:20%;
    right:0;
    width: 15%;	    
    margin: 0 2em 1em 1em;	    
  }
  .is-active-link::before {
    background-color: #5183f5;
  }
  @media (max-width: 1217px) {
    .toc {
      display: none;
    }
  }
</style>
<div class="toc"></div>
<script src="https://cdn.bootcss.com/tocbot/4.8.1/tocbot.min.js"></script>
<script type="text/javascript">
var headers = 'h3, h4',
  content = '.single',
  idArr = {}; 
  tocbot.init({
    tocSelector: '.toc',
    contentSelector: content,
    headingSelector: headers,
    scrollSmooth: true,
    scrollSmoothOffset: -100,
    headingsOffset: 100
  });
  $(document).on('pjax:send',function(){
  if ($('.toc').length) tocbot.destroy();
})

  $(document).on('pjax:complete',function(){
  toc.init(tocOptions);
})
</script></main>
<style type="text/css">
.highlight .btn-copy {
    position: relative;
    display: inline-block;
    float: right;
    padding: 6px 12px;
    margin-top: 1%;
    background: #fefbd8;
    border: 1px solid #fefbd8;
}

.dark .highlight .btn-copy {
    background: #001f29 !important;
    border: 1px solid #002733;
}

.highlight img {
    width: 13px;
}

.dark .highlight img {
    filter: invert(1);
}
</style>

<script src="https://cdn.bootcss.com/clipboard.js/2.0.4/clipboard.min.js"></script>
<script type="text/javascript">
!function (e, t, a) { 
  var initCopyCode = function(){
    var copyHtml = '';
    copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
    copyHtml += '  <img src="theme/images/clippy.svg" alt="Copy to clipboard">';
    copyHtml += '</button>';
    $(".highlight pre").before(copyHtml);
    new ClipboardJS('.btn-copy', {
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });
  }
  initCopyCode();
}(window, document);
</script><footer class="footer container">
	<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>
	<a class="main-nav-link" href="/blogroll">友链</a>
	<a class="main-nav-link" href="/about">关于</a>
</footer></body>
<style type="text/css">
.back-to-top {
    position: fixed;
    bottom: 0;
    right: 0;
    display: inline-block;
    padding: 1em;
    margin: 0 2em 2.5em 1em;
    background: #fff;
    border: 2px solid #000;
}

.dark .back-to-top {
    background: #202020;
    border: 2px solid #b3b9c5;
}

.back-to-top:hover {
    cursor: pointer;
    background: #f2f2f2;
}

.dark .back-to-top:hover {
    background: #303030;
}
</style>

<div class="back-to-top">Top</div>

<script type="text/javascript">
var $backToTop = $(".back-to-top");
$backToTop.hide();

$(window).on('scroll', function() {
    if ($(this).width() >= 1218 ){
        if ($(this).scrollTop() > 100) {
            $backToTop.fadeIn();
        } else {
            $backToTop.fadeOut();
        } 
    } else {
        $backToTop.hide();
    }  
});

$(window).on('resize', function() {
    if ($(this).width() < 1218 ) {
        $backToTop.fadeOut();
    } 
});

$backToTop.on('click', function(e) {
    $("html, body").animate({ scrollTop: 0 }, 500);
});
</script>
<script type="text/javascript">
	var nowHour = (new Date()).getHours()
	if (nowHour > 17 || nowHour < 4) {
		$('body').addClass('dark')
	}
</script></html>