<!DOCTYPE html>
<html>

<head>
Weilet's Workshop - 我的第一只爬虫    <meta charset="utf-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <meta name="description" content="A blog of a programmer.">
    <meta name="keywords" content="code,game,digital products,daily life">
    <link rel="stylesheet" type="text/css" href="https://weilet.github.io/theme/css/style.css">
</head>

<body>
    <nav class="nav">
        <div class="nav-container">
            <div class="brand">
                <a href="https://weilet.github.io">Weilet's Blog</a>
            </div>
            <div class="links">
                <a class="main-nav-link" href="/archives/">归档</a>
                <a class="main-nav-link" href="/categories/">分类</a>
                <a class="main-nav-link" href="/tags/">标签</a>
                <a class="main-nav-link" href="/index.xml">订阅</a>
            </div>
        </div>
    </nav>
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://weilet.github.io/我的第一只爬虫" rel="bookmark"
         title="Permalink to 我的第一只爬虫">我的第一只爬虫</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2018-07-12T05:28:00+08:00">
      Jul 12, 2018
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://weilet.github.io/author/pwnforwhat.html">PwnForWhat</a>
    </address>
    <div class="category">
        Category: <a href="https://weilet.github.io/category/python.html">python</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>寒假的时候学习了一下Python的爬虫，并将豆瓣电影排行榜爬取了下来</p>
<p><span class="dquo">&#8220;</span>` {.EnlighterJSRAW&nbsp;enlighter-language=&#8221;python&#8221;}</p>
<h1 id="-coding-utf-8-">-<em>- coding: utf-8 -</em>-<a class="headerlink" href="#-coding-utf-8-" title="Permanent link"> </a></h1>
<h1 id="author-lily_sun">@Author: Lily_Sun<a class="headerlink" href="#author-lily_sun" title="Permanent link"> </a></h1>
<h1 id="date-2018-01-12-051840">@Date:   2018-01-12 05:18:40<a class="headerlink" href="#date-2018-01-12-051840" title="Permanent link"> </a></h1>
<h1 id="last-modified-by-lily_sun">@Last Modified by:   Lily_Sun<a class="headerlink" href="#last-modified-by-lily_sun" title="Permanent link"> </a></h1>
<h1 id="last-modified-time-2018-01-12-051840">@Last Modified time: 2018-01-12 05:18:40<a class="headerlink" href="#last-modified-time-2018-01-12-051840" title="Permanent link"> </a></h1>
<p>import re
from urllib import&nbsp;request</p>
<p>cnt = 1
url = &#8220;https://movie.douban.com/chart&#8221;
req = request.Request(url)
with request.urlopen(req) as f:
data = f.read().decode(&#8216;utf-8&#8217;)
reg_name = r&#8217;<div class="name">[]<a .*?class="">[\n][&#8221; &#8220;]<em>.</em>[\n][&#8221; &#8220;]<em>(.</em>)&#8217;
list = (re.findall(reg_name,data))
print(&#8220;rank&#8221;+&#8221;\t\t&#8221;+&#8221;name&#8221;)
for x in list:
print(cnt,end=&#8221;\t\t\t&#8221;)
print(x)
cnt = cnt + 1&nbsp;&#8220;`</p>
<p>整个过程其实就是折腾正则表达式，以至于我现在都不知道为什么要加个[]。（然而实践告诉我就是要这样的。）</p>
<p>主要用来urllib 和 re&nbsp;模块。</p>
<p>先发送请求到网站，然后打开后以utf-8编码格式的提取内容，再用正则提取需要的信息，最后添加点样式，打表即可。</p>
  </div><!-- /.entry-content -->
</section>
    <footer class="footer container">
        <a class="main-nav-link" href="/blogroll/">友链</a>
        <a class="main-nav-link" href="/about/">关于</a>
    </footer>
</body>

</html>