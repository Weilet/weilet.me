<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>A Pelican Blog - linux</title><link href="https://weilet.me/" rel="alternate"></link><link href="https://weilet.me/feeds/linux.atom.xml" rel="self"></link><id>https://weilet.me/</id><updated>2018-08-07T06:09:00+08:00</updated><entry><title>用crontab配置定时任务</title><link href="https://weilet.me/%E7%94%A8crontab%E9%85%8D%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1" rel="alternate"></link><published>2018-08-07T06:09:00+08:00</published><updated>2018-08-07T06:09:00+08:00</updated><author><name>PwnForWhat</name></author><id>tag:weilet.me,2018-08-07:/用crontab配置定时任务</id><summary type="html">&lt;p&gt;前段时间需要定期把一个服务器上的日志以邮件的形式发送到我的邮箱，于是了解了一下linux下定时任务的实现。&lt;/p&gt;
&lt;p&gt;（本文假定阅读者有基本的linux操作能力）&lt;/p&gt;
&lt;p&gt;linux下一般用crontab配置定时任务，本人用的是centos。&lt;/p&gt;
&lt;p&gt;安装命令如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;yum install vixie-cron #cron主程序&lt;/span&gt;
&lt;span class="err"&gt;yum install crontab #crontab主体&lt;/span&gt;
&lt;span class="err"&gt;chkconfig -level 345 crond on #设置开机自启动&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装成功后打开crontab&amp;nbsp;配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;vi /etc/crontab&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后 该文件布局如下（ &lt;strong&gt;注意，以编辑crontab的方式运行定时任务不能省略用户名&lt;/strong&gt;）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;m h d m weekday user  command&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;对应的分别是：&lt;/p&gt;
&lt;p&gt;分钟 小时 日期 月份 星期 用户&amp;nbsp;命令&lt;/p&gt;
&lt;p&gt;每个值的范围（不过不限制则为*）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;0-59 0-23 1-31 1-12 …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;前段时间需要定期把一个服务器上的日志以邮件的形式发送到我的邮箱，于是了解了一下linux下定时任务的实现。&lt;/p&gt;
&lt;p&gt;（本文假定阅读者有基本的linux操作能力）&lt;/p&gt;
&lt;p&gt;linux下一般用crontab配置定时任务，本人用的是centos。&lt;/p&gt;
&lt;p&gt;安装命令如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;yum install vixie-cron #cron主程序&lt;/span&gt;
&lt;span class="err"&gt;yum install crontab #crontab主体&lt;/span&gt;
&lt;span class="err"&gt;chkconfig -level 345 crond on #设置开机自启动&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装成功后打开crontab&amp;nbsp;配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;vi /etc/crontab&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后 该文件布局如下（ &lt;strong&gt;注意，以编辑crontab的方式运行定时任务不能省略用户名&lt;/strong&gt;）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;m h d m weekday user  command&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;对应的分别是：&lt;/p&gt;
&lt;p&gt;分钟 小时 日期 月份 星期 用户&amp;nbsp;命令&lt;/p&gt;
&lt;p&gt;每个值的范围（不过不限制则为*）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;0-59 0-23 1-31 1-12 0-6(0 = sunday) username command&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;下面举例：&lt;/p&gt;
&lt;p&gt;比如我想要在每天0：00以root用户执行一个名为test.sh的脚本：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;0 0 * * * root ./root/test.sh #假设先前已经给了执行权限&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;再比如每周六和周日以root用户执行一个名为img_crawl.py的爬虫：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;* * * * 0,6 root python /root/img_crawl.py&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;或者你想要每天10：50开始&amp;nbsp;每十分钟以root用户执行clear_ram.sh脚本：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;50,0 10 * * * root ./root/clear_ram.sh&lt;/span&gt;
&lt;span class="err"&gt;0-59/10 * * * * root  ./root/clear_ram.sh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;以上就是玩了三天crontab的总结啦\~&lt;/p&gt;</content><category term="linux"></category></entry><entry><title>忘记root的密码如何解决</title><link href="https://weilet.me/%E5%BF%98%E8%AE%B0%E4%BA%86ubuntu%E7%9A%84root%E7%94%A8%E6%88%B7%E7%9A%84%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3" rel="alternate"></link><published>2018-08-05T22:47:00+08:00</published><updated>2018-08-05T22:47:00+08:00</updated><author><name>PwnForWhat</name></author><id>tag:weilet.me,2018-08-05:/忘记了ubuntu的root用户的密码如何解决</id><content type="html">&lt;h4 id="ubuntu"&gt;昨天教同学使用Ubuntu，他居然把密码给忘记了。于是便顺便了解了一下这方面的知识。&lt;a class="headerlink" href="#ubuntu" title="Permanent link"&gt; &lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;首先是在开机3秒内按下ESC键&lt;/p&gt;
&lt;p&gt;然后就会出现一个菜单，选择进入恢复模式 （recovery&amp;nbsp;mode）&lt;/p&gt;
&lt;p&gt;进入恢复模式以后，启用root&amp;nbsp;shell&lt;/p&gt;
&lt;p&gt;将目录改为可写&lt;br /&gt;
&lt;code&gt;mount -o rw,remount&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;查看home下的用户&lt;br /&gt;
&lt;code&gt;ls /home&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;修改密码&lt;br /&gt;
&lt;code&gt;passwd&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;输入两次密码（一次是确认）即修改完成&lt;/p&gt;
&lt;p&gt;重启&lt;/p&gt;</content><category term="linux"></category></entry></feed>